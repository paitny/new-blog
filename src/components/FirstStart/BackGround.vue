<template>
  <div class="hj-carousel" @mouseenter="stop" @mouseleave="go">
    <transition-group name="list" tag="ul" ref="container" class="swiper">
      <li v-for="(item, index) in carouselInfo" :key="index" class="list-item"
          v-show="index === currentIndex"
          @webkitTransitionend="carouseTransition"
          :style="{backgroundImage: `url(${baseURL}${item.swiper})`}"
      >

      </li>
    </transition-group>
    <!-- 小圆点 -->
    <div
        class="swiperBtn"
        @click="autoPlay"
        style="width: 50px;width: 50px"
    >
      <svg  t="1652024719010" class="icon" viewBox="0 0 1282 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1551" width="50" height="50"><path d="M1271.908122 311.437697c-53.696603-81.365366-187.885741-221.873806-427.16381-299.328886-26.691192-8.728317-55.686659-2.862888-75.657047 17.456633-45.387246 46.382274-115.213778 108.353321-208.502025 7.436526-29.274774-31.648876-89.028828-38.823552-126.333653-18.312008C226.133608 119.048145 56.210742 259.521671 56.472592 334.323343c-0.261849 134.712837 141.8526 175.439162 162.730733 169.730843s75.377741-78.554849 75.377741-78.554849c14.070046-14.663572 38.125286-4.276875 38.125287 16.479062v404.278164c0 93.689749 73.509882 170.341825 163.341715 170.341825H755.698027c131.43099 0 248.093668 22.484143 248.093668-258.724758V439.080598c0-20.73848 24.05524-31.142633 38.125287-16.461605 0 0 46.66158 75.936354 78.066063 81.435193 29.676276 5.23699 152.780452-45.0032 162.346687-150.528547a65.74168 65.74168 0 0 0-10.42161-42.087942z" fill="#FFF6B3" p-id="1552"></path><path d="M759.25918 1024c-8.536294 0-17.15987-0.10474-25.87073-0.20948s-18.050159-0.20948-27.162521-0.209479H446.558513c-93.916686 0-170.306912-79.549877-170.306911-177.324478V441.908572a15.972819 15.972819 0 0 0-9.950281-15.257097 14.296982 14.296982 0 0 0-15.885536 3.334217c-9.967737 13.319411-56.97845 74.819129-78.851612 80.789298-15.274554 4.189592-64.205496-9.252015-103.168701-39.050489C37.113186 447.808914-0.139269 404.551378 0.000384 334.305886c-0.122196-38.072917 40.150256-92.624895 113.276092-153.61837 71.572195-59.527119 166.763215-119.263717 268.290992-168.194659 41.197654-22.519057 104.058989-13.301954 134.660467 19.778365 31.561592 34.145174 62.948619 51.671634 93.288247 52.10805 40.516845 0.610982 74.435083-28.349572 105.106388-59.684229 21.139983-21.593855 52.858685-28.978011 82.79681-19.289579 273.12648 88.40039 398.814238 253.592508 430.829703 302.121947a72.933813 72.933813 0 0 1 11.503921 46.556841c-5.07988 56.332555-40.324822 94.353101-68.988614 116.313545-38.1602 29.274774-82.395308 43.781236-101.457951 40.464476-32.731187-5.725776-75.726874-73.213119-82.395308-83.966405a14.314439 14.314439 0 0 0-15.710969-3.142194 15.990276 15.990276 0 0 0-9.950281 15.257097v318.862859c0 114.079097-18.608771 185.616379-58.584461 225.190566-37.077889 36.589103-88.13854 40.935804-143.40624 40.935804zM260.732655 411.568944a29.082751 29.082751 0 0 1 10.788199 2.112253 30.130149 30.130149 0 0 1 18.696054 28.227375v404.347991c0 90.076226 70.140751 163.359172 156.341605 163.359171h259.667416c9.199646 0 18.416748 0.10474 27.319631 0.20948 64.746652 0.785548 120.642791 1.448901 159.326689-36.763669 36.658929-36.205057 54.447238-106.590201 54.447239-215.187915V439.080598a30.095235 30.095235 0 0 1 18.696054-28.209919 28.279745 28.279745 0 0 1 31.421939 6.982653l0.523699 0.541156 0.384046 0.628438c12.533863 20.389347 50.117993 74.155777 73.317859 78.205716 12.07999 2.112253 52.649205-8.728317 90.565012-37.758697 26.446799-20.284608 58.933593-55.21533 63.5596-106.485461a58.89868 58.89868 0 0 0-9.252015-37.619044c-31.421939-47.569325-154.665768-209.479596-423.463004-296.518369-24.875702-8.047508-51.113021-2.007513-68.517284 15.71097-32.853383 33.569105-69.529769 64.589542-115.213778 63.891277-34.31974-0.488786-69.093353-19.533972-103.360724-56.576948-26.18495-28.349572-82.377851-36.431993-117.832273-16.95039l-0.331676 0.174566C287.19691 73.538703 192.878722 132.646862 122.196815 191.440802c-68.90133 57.362496-108.353321 109.418176-108.231124 142.795258-0.122196 64.589542 34.145174 104.338296 62.843878 126.35111 38.910835 29.676276 82.866637 38.910835 91.001428 36.658929 13.528891-3.700806 51.113021-48.616723 71.572196-76.05855l0.558612-0.645896a28.524138 28.524138 0 0 1 20.79085-8.972709z" fill="#323333" p-id="1553"></path><path d="M620.025075 279.300036c-115.999326 0-210.369884-90.774492-210.369884-202.496943a194.798568 194.798568 0 0 1 13.773283-72.148264 6.982653 6.982653 0 1 1 12.970279 5.149706 181.077654 181.077654 0 0 0-12.778256 67.050928c0 103.936793 88.103627 188.531637 196.404578 188.531636s196.404578-84.55993 196.404578-188.531636a181.548983 181.548983 0 0 0-7.838028-52.876142 6.982653 6.982653 0 0 1 13.354324-4.067395 195.51429 195.51429 0 0 1 8.449011 56.943537c0 111.617711-94.370558 202.444573-210.369885 202.444573z" fill="#323333" p-id="1554"></path><path d="M489.693853 607.641846v-123.121633h40.656499a94.265818 94.265818 0 0 1 21.035242 1.745664 39.225054 39.225054 0 0 1 17.299524 8.920339 50.152907 50.152907 0 0 1 13.965306 21.035243 85.729525 85.729525 0 0 1 4.626008 29.274774 89.395418 89.395418 0 0 1-3.142194 24.858245 61.709198 61.709198 0 0 1-7.942768 17.840679 43.641583 43.641583 0 0 1-10.753286 11.172245 42.664011 42.664011 0 0 1-14.087503 6.179648 77.61219 77.61219 0 0 1-18.97536 2.094796z m15.623687-14.523919h25.207378a59.055789 59.055789 0 0 0 18.312008-2.269362 26.18495 26.18495 0 0 0 10.596176-6.389128 39.417077 39.417077 0 0 0 8.728317-15.571316 79.514963 79.514963 0 0 0 3.089824-23.723564q0-19.324493-6.074909-29.676277t-14.768311-13.965306q-6.284388-2.513755-20.214781-2.513755h-24.875702zM604.122083 547.678312q0-30.671304 15.710969-48.005741t40.743782-17.334437a54.848741 54.848741 0 0 1 29.484253 8.134791 52.369899 52.369899 0 0 1 20.005301 22.693623 76.372769 76.372769 0 0 1 6.89537 33.045407 75.150805 75.150805 0 0 1-7.261959 33.516735 50.624236 50.624236 0 0 1-20.529 22.379403 56.803884 56.803884 0 0 1-28.663792 7.593636 54.115562 54.115562 0 0 1-29.798472-8.396641 53.225274 53.225274 0 0 1-19.900562-22.920559 72.060981 72.060981 0 0 1-6.68589-30.706217z m16.095015 0.244393q0 22.257207 11.486465 35.070375a38.893378 38.893378 0 0 0 57.816368-0.122196q11.381725-12.935365 11.399182-36.658929a65.410004 65.410004 0 0 0-4.870401-26.18495 38.631529 38.631529 0 0 0-14.262069-17.456633 37.409565 37.409565 0 0 0-21.052699-6.179648 39.102858 39.102858 0 0 0-28.681248 11.853054q-11.887967 11.887967-11.905424 39.678927zM792.3395 559.356799v-14.454092l50.013253-0.087283v45.701465a88.225823 88.225823 0 0 1-23.758477 14.401722 68.080869 68.080869 0 0 1-25.137552 4.818031 64.676825 64.676825 0 0 1-31.596505-7.768202 50.257646 50.257646 0 0 1-21.471659-22.466686 73.143292 73.143292 0 0 1-7.244503-32.835927 78.764328 78.764328 0 0 1 7.139763-33.551649 49.192792 49.192792 0 0 1 20.808307-23.164952 62.843879 62.843879 0 0 1 31.16009-7.558722 59.527119 59.527119 0 0 1 23.095125 4.346702 38.404593 38.404593 0 0 1 16.234669 12.062533 54.709088 54.709088 0 0 1 8.937796 20.144955l-14.087503 4.032482a46.364817 46.364817 0 0 0-6.616064-14.768312 27.162521 27.162521 0 0 0-11.259528-8.623576 40.045516 40.045516 0 0 0-16.269582-3.229477 46.102968 46.102968 0 0 0-18.521488 3.404043 34.616503 34.616503 0 0 0-12.603689 8.937796 42.943317 42.943317 0 0 0-7.453982 12.219643 66.911274 66.911274 0 0 0-4.521268 24.770963q0 16.479062 5.44647 27.546566a35.681358 35.681358 0 0 0 15.815709 16.479062 47.464585 47.464585 0 0 0 22.204837 5.324273 56.280185 56.280185 0 0 0 34.459394-12.760799v-22.920559z" fill="#F7DA5E" p-id="1555"></path><path d="M456.700817 607.641846v-123.121633h40.673955a94.038882 94.038882 0 0 1 20.947959 1.745664 39.382164 39.382164 0 0 1 17.31698 8.815599 50.117993 50.117993 0 0 1 13.965307 21.035243 85.729525 85.729525 0 0 1 4.626008 29.274774 90.093683 90.093683 0 0 1-3.054911 24.858245 61.255325 61.255325 0 0 1-8.064965 17.927962 43.39719 43.39719 0 0 1-10.753286 11.172245 42.664011 42.664011 0 0 1-14.087502 6.179648 77.455081 77.455081 0 0 1-18.957904 2.094796z m15.623686-14.523919h25.207379a59.177986 59.177986 0 0 0 18.329464-2.269362 26.18495 26.18495 0 0 0 10.57872-6.389128 39.207598 39.207598 0 0 0 8.728316-15.571316 78.903981 78.903981 0 0 0 3.107281-23.723564q0-19.324493-6.092365-29.676277t-14.768311-13.965306q-6.284388-2.513755-20.214781-2.513755h-24.875703zM571.05922 547.678312q0-30.671304 15.710969-48.005741t40.761239-17.334437a54.744001 54.744001 0 0 1 29.466796 8.134791 52.369899 52.369899 0 0 1 20.005302 22.693623 76.372769 76.372769 0 0 1 6.982653 33.045407 75.377741 75.377741 0 0 1-7.244503 33.516735 50.728976 50.728976 0 0 1-20.546457 22.379403 56.803884 56.803884 0 0 1-28.663791 7.593636 54.115562 54.115562 0 0 1-29.798473-8.396641 53.190361 53.190361 0 0 1-19.883105-22.920559 71.816588 71.816588 0 0 1-6.79063-30.706217z m16.112472 0.244393q0 22.257207 11.469008 35.070375a38.910835 38.910835 0 0 0 57.833825-0.122196q11.399181-12.935365 11.381725-36.658929a65.410004 65.410004 0 0 0-4.870401-26.18495 38.596616 38.596616 0 0 0-14.244612-17.456633 37.496848 37.496848 0 0 0-21.070156-6.179648 39.067945 39.067945 0 0 0-28.541595 11.887967q-11.957794 11.853054-11.957794 39.644014zM759.346463 559.356799v-14.454092l50.013254-0.087283v45.701465a88.225823 88.225823 0 0 1-23.688651 14.401722 68.080869 68.080869 0 0 1-25.120095 4.818031 64.746652 64.746652 0 0 1-31.613962-7.768202 50.257646 50.257646 0 0 1-21.471659-22.466686 73.317859 73.317859 0 0 1-7.331786-32.835927 79.026178 79.026178 0 0 1 7.20959-33.551649 49.192792 49.192792 0 0 1 20.721023-23.164952 62.966075 62.966075 0 0 1 31.16009-7.558722 59.666772 59.666772 0 0 1 23.164952 4.329245 38.404593 38.404593 0 0 1 16.217212 12.062534 54.429782 54.429782 0 0 1 8.937796 20.144954l-14.087503 4.032482a46.364817 46.364817 0 0 0-6.598607-14.768311 27.232347 27.232347 0 0 0-11.276985-8.623577 40.045516 40.045516 0 0 0-16.269582-3.229477 46.102968 46.102968 0 0 0-18.521487 3.404043 34.756156 34.756156 0 0 0-12.603689 8.937797 43.34482 43.34482 0 0 0-7.453983 12.219643 66.911274 66.911274 0 0 0-4.503811 24.770962q0 16.479062 5.429013 27.546567a35.646445 35.646445 0 0 0 15.833166 16.479061 47.394759 47.394759 0 0 0 22.065184 5.359187 56.175445 56.175445 0 0 0 34.459394-12.760799v-22.938016z" fill="#333333" p-id="1556"></path></svg>
    </div>
    <Music></Music>
  </div>

</template>

<script>
import Music from "./Music";
export default {
components:{
  Music
},
  data() {
    return {
      carouselInfo: [
        {}
      ],
      // 当前索引
      currentIndex: 0,
      // 定时器
      timer: '',
      // 小圆点开关
      begin: '',
    }
  },
  methods: {
  //获取轮播图
    async getSwiper(){
      let {data}=await this.$axios({
        method:"GET",
        url:"/get/swiper"
      })
      if(data.code){
        return this.$message.error(data.msg)
      }
      this.carouselInfo=data.data

    },
    go() {
      this.timer = setInterval(() => {
        this.autoPlay()
      }, 3000)
    },
    stop() {
      clearInterval(this.timer);
      this.timer = null
    },
    change(index) {
      this.currentIndex = index
    },
    autoPlay() {
      this.currentIndex++;
      if (this.currentIndex > this.carouselInfo.length - 1) {
        this.currentIndex = 0
      }

    },
    carouseTransition() {
      this.begin = false;
    }
  },
  mounted(){

    // this.$nextTick(() => {
    //   if (this.begin) {
    //     return;
    //   }
    //   this.begin = true;
    //   this.timer = setInterval(() => {
    //     this.autoPlay()
    //   }, 3000)
    // });
    clearInterval(this.timer)
   this.go()
    this.getSwiper()

  },
}


</script>



<style scoped lang="less">
.hj-carousel {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 1;
  background-size: cover;
  margin: 0;
  .list-item {
    position: absolute;
    width:100%;
    height:100%;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    background-position: center center;
    background-size: cover;
    .intro-box {
      position: relative;
      height: 100%;
      .service-intro {
        width:418px;
        position: absolute;
        top: 152px;
        left: 58px;
        color: #FFF;
        h2 {
          height:53px;
          line-height:53px;
          font-size:38px;
          font-weight:500;
        }
        p {
          height: 34px;
          line-height: 34px;
          font-size:18px;
        }
        .intro-btn {
          display: block;
          margin-top: 33px;
          width:123px;
          height:40px;
          line-height: 40px;
          text-align: center;
          background:linear-gradient(360deg,rgba(228,39,53,1) 0%,rgba(235,121,101,1) 100%);
          box-shadow:0 5px 20px 0 rgba(230,2,19,0.5);
          border-radius:5px;
          color: #FFF;
          text-decoration: none;
        }
      }
    }
  }
  .circles-items {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 16px;
    z-index: 10;
    margin: 0 auto;
    text-align: center;
    font-size: 0;
    overflow: hidden;
  }
  .swiperBtn{
    position: absolute;
    right: 15%;
    bottom: 15%;
    z-index: 996;
    cursor: pointer;
    &:hover{
     transform: rotateZ(10deg);
    }
  }

}



.list-enter,
.list-leave-to {
  width: 0;
  height: 0;
  opacity: 0;
}

.list-leave-active,
.list-enter-active {
  transition: all 2s linear;
}


</style>




